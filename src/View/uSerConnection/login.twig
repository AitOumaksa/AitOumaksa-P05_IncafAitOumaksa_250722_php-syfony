{% extends 'layout/layout.twig' %}


 {% block content %}
 <!--Login Form-->
   <div class="form-group container">


        <form method="post" class="needs-validation Connexion"  novalidate>
           <div class="container mt-5">
            <div class="row d-flex justify-content-center">
                <div class="col-md-6">
                    <div class="card px-5 py-5" id="form1">
                    <div id="liveAlertPlaceholderLogin"></div>
                        <div class="form-data">
                            <div class="form-group mb-3 pt-3">                            
                            <label for="email" >Adresse email :</label>
                            <input type="email" name="mail"  placeholder="Votre adresse email" class="form-control" required>
                            <div class="valid-feedback">Email valide</div>
                            <div class="invalid-feedback">Email invalide</div>     
                            </div>

                             <div class="form-group mb-3 pt-3">
                            
                            <label for="email" >Mod de passe :</label>
                            <input type="password" name="password"  placeholder="votre mot de passe" class="form-control" required>
                            <div class="valid-feedback">Email valide</div>
                            <div class="invalid-feedback">Email invalide</div>
                            <a href = "/inscription">Inscivez vous</a>    
                            </div>

                            <div class="row">
                                <div class="col pt-3">
                                    <input class = "btn btn-dark" autocomplete = "on" type="submit" value="Connexion"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
                 
                


        </form>
    </div>
    <script>
    
    url_login = `http://localhost/login`;
    form_login = document.querySelector('.Connexion');

      
          form_login.addEventListener('submit', function (event) { 
          event.stopPropagation();
          event.preventDefault();
          this.classList.add('was-validated');
          if (form_login.checkValidity()) {
            const formData = createFormData(form_login);
            jsonres = postData(formData,url_login)
             .then(function (jsonres) {
            // console.log('console',jsonres);
              if(jsonres.success){
                   formReset(form_login);
                    document.location.href = `http://localhost/`;
                }else{
                    alertType='danger'
                    alertMessage = jsonres.error
                }
                const alertPlaceholder = document.getElementById('liveAlertPlaceholderLogin')
                alert(alertMessage ,alertType ,alertPlaceholder)
           })
              
          }

      })
    
    </script>


{% endblock %}